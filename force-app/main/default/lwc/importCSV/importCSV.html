<template>
    <lightning-card title="CSV Importer">
        <div class="slds-p-around_medium">
            
            <!-- File Input -->
            <lightning-input 
                type="file"
                label="Upload CSV File"
                onchange={handleFileChange}>
            </lightning-input>

            <!-- Upload Button -->
            <lightning-button 
                variant="brand"
                label="Upload"
                onclick={uploadFile}
                class="slds-m-top_small">
            </lightning-button>

            <!-- Status Message -->
            <p class="slds-m-top_medium">{message}</p>

            <!-- CSV Preview -->
            <template if:true={previewData}>
                <lightning-card title="CSV Preview" class="slds-m-top_medium">
                    <div class="slds-table_edit_container slds-is-relative">
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                            <thead>
                                <tr>
                                    <template for:each={headers} for:item="header">
                                        <th key={header}>{header}</th>
                                    </template>
                                </tr>
                            </thead>
                            <tbody>
                                <template for:each={previewData} for:item="row">
                                    <tr key={row.key}>
                                        <template for:each={row.values} for:item="cell">
                                            <td key={cell.key}>{cell.value}</td>
                                        </template>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </lightning-card>
            </template>
        </div>
    </lightning-card>
</template>
